DROP TABLE IF EXISTS "weekdays";
DROP TABLE IF EXISTS "reviewer_types";
DROP TABLE IF EXISTS "vehicles";
DROP TABLE IF EXISTS "rides";
DROP TABLE IF EXISTS "driver_availability_windows";
DROP TABLE IF EXISTS "reviews";
DROP TABLE IF EXISTS "drivers";
DROP TABLE IF EXISTS "licenses";
DROP TABLE IF EXISTS "favourite_locations";
DROP TABLE IF EXISTS "ride_requests";
DROP TABLE IF EXISTS "passengers";
DROP TABLE IF EXISTS "accounts";
DROP TABLE IF EXISTS "addresses";

CREATE TABLE "weekdays" (
	"ID"	INTEGER,
	"DAY"	TEXT NOT NULL,
	PRIMARY KEY("ID")
);
CREATE TABLE "reviewer_types" (
	"ID"	INTEGER,
	"TYPE"	TEXT NOT NULL,
	PRIMARY KEY("ID" AUTOINCREMENT)
);
CREATE TABLE "licenses" (
	"ID"	INTEGER,
	"NUMBER"	TEXT NOT NULL UNIQUE,
	"EXPIRY_DATE"	TEXT NOT NULL,
	PRIMARY KEY("ID" AUTOINCREMENT)
);
CREATE TABLE "drivers" (
	"ID"	INTEGER,
	"LICENSE_ID"	INTEGER NOT NULL,
	PRIMARY KEY("ID"),
	FOREIGN KEY("ID") REFERENCES "accounts"("ID"),
	FOREIGN KEY("LICENSE_ID") REFERENCES "licenses"("ID")
);
CREATE TABLE "passengers" (
	"ID"	INTEGER,
	"CREDIT_CARD_NUMBER"	TEXT NOT NULL,
	FOREIGN KEY("ID") REFERENCES "accounts"("ID"),
	PRIMARY KEY("ID")
);
CREATE TABLE "driver_availability_windows" (
	"ID"	INTEGER,
	"DRIVER_ID"	INTEGER NOT NULL,
	"START_DAY_ID"	INTEGER NOT NULL,
	"START_TIME"	TEXT NOT NULL,
	"END_DAY_ID"	INTEGER NOT NULL,
	"END_TIME"	TEXT NOT NULL,
	FOREIGN KEY("START_DAY_ID") REFERENCES "weekdays"("ID"),
	FOREIGN KEY("END_DAY_ID") REFERENCES "weekdays"("ID"),
	FOREIGN KEY("DRIVER_ID") REFERENCES "drivers"("ID"),
	PRIMARY KEY("ID" AUTOINCREMENT)
);
CREATE TABLE "reviews" (
	"ID"	INTEGER,
	"PASSENGER_ID"	INTEGER NOT NULL,
	"DRIVER_ID"	INTEGER NOT NULL,
	"REVIEWER_TYPE_ID"	INTEGER NOT NULL,
	"CONTENT"	TEXT NOT NULL,
	"DATE"	TEXT NOT NULL,
	FOREIGN KEY("DRIVER_ID") REFERENCES "drivers"("ID"),
	FOREIGN KEY("REVIEWER_TYPE_ID") REFERENCES "reviewer_types"("ID"),
	FOREIGN KEY("PASSENGER_ID") REFERENCES "passengers"("ID"),
	PRIMARY KEY("ID" AUTOINCREMENT)
);
CREATE TABLE "ride_requests" (
	"ID"	INTEGER,
	"PASSENGER_ID"	INTEGER NOT NULL,
	"PICKUP_LOCATION_ID"	INTEGER NOT NULL,
	"PICKUP_DATE"	TEXT NOT NULL,
	"PICKUP_TIME"	TEXT NOT NULL,
	"NUMBER_OF_RIDERS"	INTEGER NOT NULL,
	"DROPOFF_LOCATION_ID"	INTEGER NOT NULL,
	FOREIGN KEY("PASSENGER_ID") REFERENCES "passengers"("ID"),
	FOREIGN KEY("DROPOFF_LOCATION_ID") REFERENCES "addresses"("ID"),
	FOREIGN KEY("PICKUP_LOCATION_ID") REFERENCES "addresses"("ID"),
	PRIMARY KEY("ID" AUTOINCREMENT)
);
CREATE TABLE "vehicles" (
	"ID"	INTEGER,
	"MAKE"	TEXT NOT NULL,
	"MODEL"	TEXT NOT NULL,
	"YEAR"	INTEGER NOT NULL,
	"COLOUR"	TEXT NOT NULL,
	"NUMBER_OF_AVAILABLE_SEATS"	INTEGER NOT NULL,
	"LICENSE_PLATE_NUMBER"	TEXT NOT NULL UNIQUE,
	"DRIVER_ID"	INTEGER NOT NULL,
	FOREIGN KEY("DRIVER_ID") REFERENCES "drivers"("ID"),
	PRIMARY KEY("ID" AUTOINCREMENT)
);
CREATE TABLE "rides" (
	"ID"	INTEGER,
	"DRIVER_ID"	INTEGER NOT NULL,
	"REQUEST_ID"	INTEGER NOT NULL UNIQUE,
	"ACTUAL_START_DATE"	TEXT,
	"ACTUAL_START_TIME"	TEXT,
	"ACTUAL_END_DATE"	TEXT,
	"ACTUAL_END_TIME"	TEXT,
	"RATING_FROM_DRIVER"	INTEGER,
	"RATING_FROM_PASSENGER"	INTEGER,
	"DISTANCE"	REAL,
	"CHARGE"	REAL,
	FOREIGN KEY("REQUEST_ID") REFERENCES "ride_requests"("ID"),
	FOREIGN KEY("DRIVER_ID") REFERENCES "drivers"("ID"),
	PRIMARY KEY("ID" AUTOINCREMENT)
);
CREATE TABLE "accounts" (
	"ID"	INTEGER,
	"FIRST_NAME"	TEXT NOT NULL,
	"LAST_NAME"	TEXT NOT NULL,
	"BIRTHDATE"	TEXT NOT NULL,
	"ADDRESS_ID"	INTEGER NOT NULL,
	"PHONE_NUMBER"	TEXT NOT NULL,
	"EMAIL"	TEXT NOT NULL UNIQUE,
	FOREIGN KEY("ADDRESS_ID") REFERENCES "addresses"("ID"),
	PRIMARY KEY("ID" AUTOINCREMENT)
);
CREATE TABLE "addresses" (
	"ID"	INTEGER,
	"STREET"	TEXT NOT NULL,
	"CITY"	TEXT NOT NULL,
	"PROVINCE"	TEXT NOT NULL,
	"POSTAL_CODE"	TEXT NOT NULL,
	UNIQUE("STREET","CITY","PROVINCE","POSTAL_CODE"),
	PRIMARY KEY("ID" AUTOINCREMENT)
);
CREATE TABLE "favourite_locations" (
	"ID"	INTEGER,
	"PASSENGER_ID"	INTEGER NOT NULL,
	"LOCATION_ID"	INTEGER NOT NULL,
	"NAME"	TEXT NOT NULL,
	FOREIGN KEY("LOCATION_ID") REFERENCES "addresses"("ID"),
	FOREIGN KEY("PASSENGER_ID") REFERENCES "passengers"("ID"),
	PRIMARY KEY("ID" AUTOINCREMENT)
);

-- Addresses
INSERT INTO "main"."addresses" ("ID", "STREET", "CITY", "PROVINCE", "POSTAL_CODE") VALUES ('1', '6 Second Street', 'Ottawa', 'Ontario', 'B3B4B2');
INSERT INTO "main"."addresses" ("ID", "STREET", "CITY", "PROVINCE", "POSTAL_CODE") VALUES ('2', '123 Town Road', 'Toronto', 'Ontario', 'P9P9P9');
INSERT INTO "main"."addresses" ("ID", "STREET", "CITY", "PROVINCE", "POSTAL_CODE") VALUES ('3', '45 Some Road', 'Toronto', 'Ontario', 'C1F2T3');

-- Accounts
INSERT INTO "main"."accounts" ("ID", "FIRST_NAME", "LAST_NAME", "BIRTHDATE", "ADDRESS_ID", "PHONE_NUMBER", "EMAIL") VALUES (1, 'Rich', 'Guy', 'June 7, 1987', 1, '5554441111', 'rg@gmail.com');
INSERT INTO "main"."accounts" ("ID", "FIRST_NAME", "LAST_NAME", "BIRTHDATE", "ADDRESS_ID", "PHONE_NUMBER", "EMAIL") VALUES (2, 'Jack', 'Jackson', 'Jan 9, 1985', 3, '1112223333', 'jj123@gmail.com');
INSERT INTO "main"."accounts" ("ID", "FIRST_NAME", "LAST_NAME", "BIRTHDATE", "ADDRESS_ID", "PHONE_NUMBER", "EMAIL") VALUES (3, 'Kev', 'Dinkins', 'Sept 1, 1945', 2, '7773331111', 'kd@gmail.com');

-- Passengers
INSERT INTO "main"."passengers" ("ID", "CREDIT_CARD_NUMBER") VALUES ('1', '8888666677775444');
INSERT INTO "main"."passengers" ("ID", "CREDIT_CARD_NUMBER") VALUES ('2', '9999888877776666');

-- Licenses
INSERT INTO "main"."licenses" ("ID", "NUMBER", "EXPIRY_DATE") VALUES ('1', 'DD112233', 'June 18, 2023');
INSERT INTO "main"."licenses" ("ID", "NUMBER", "EXPIRY_DATE") VALUES ('2', 'DD443322', 'Sept 6, 2025');

-- Drivers
INSERT INTO "main"."drivers" ("ID", "LICENSE_ID") VALUES ('2', '1');
INSERT INTO "main"."drivers" ("ID", "LICENSE_ID") VALUES ('3', '2');

-- Favourites
INSERT INTO "main"."favourite_locations" ("ID", "PASSENGER_ID", "LOCATION_ID", "NAME") VALUES ('1', '1', '2', 'Toms');
INSERT INTO "main"."favourite_locations" ("ID", "PASSENGER_ID", "LOCATION_ID", "NAME") VALUES ('2', '2', '1', 'McDs');

-- Ride requests
INSERT INTO "main"."ride_requests" ("ID", "PASSENGER_ID", "PICKUP_LOCATION_ID", "PICKUP_DATE", "PICKUP_TIME", "NUMBER_OF_RIDERS", "DROPOFF_LOCATION_ID") VALUES ('1', '1', '1', 'Aug 7, 2023', '5:15 PM', '3', '3');
INSERT INTO "main"."ride_requests" ("ID", "PASSENGER_ID", "PICKUP_LOCATION_ID", "PICKUP_DATE", "PICKUP_TIME", "NUMBER_OF_RIDERS", "DROPOFF_LOCATION_ID") VALUES ('2', '2', '3', 'Dec 5, 2023', '11:25 AM', '4', '2');
INSERT INTO "main"."ride_requests" ("ID", "PASSENGER_ID", "PICKUP_LOCATION_ID", "PICKUP_DATE", "PICKUP_TIME", "NUMBER_OF_RIDERS", "DROPOFF_LOCATION_ID") VALUES ('3', '1', '3', 'June 9, 2023', '8:31 PM', '1', '1');

-- Rides
INSERT INTO "main"."rides" ("ID", "DRIVER_ID", "REQUEST_ID", "ACTUAL_START_DATE", "ACTUAL_START_TIME", "ACTUAL_END_DATE", "ACTUAL_END_TIME", "RATING_FROM_DRIVER", "RATING_FROM_PASSENGER", "DISTANCE", "CHARGE") VALUES ('1', '2', '1', 'Aug 7, 2023', '5:15 PM', 'Aug 7, 2023', '6:00 PM', 5, 5, 100.0, 120.0);
INSERT INTO "main"."rides" ("ID", "DRIVER_ID", "REQUEST_ID", "ACTUAL_START_DATE", "ACTUAL_START_TIME", "ACTUAL_END_DATE", "ACTUAL_END_TIME", "RATING_FROM_DRIVER", "RATING_FROM_PASSENGER", "DISTANCE", "CHARGE") VALUES ('2', '2', '2', 'Dec 5, 2023', '11:20 AM', 'Dec 5, 2023', '11:30 AM', 3, 2, 50.0, 45.0);